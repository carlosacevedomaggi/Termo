{"version":3,"sources":["turbopack:///[project]/src/app/ui/Accordion.tsx"],"sourcesContent":["\"use client\"\r\nimport { useEffect, useMemo, useRef, useState } from \"react\"\r\n\r\ntype FaqItem = {\r\n  question: string\r\n  answer: string\r\n}\r\n\r\ntype AccordionProps = {\r\n  items: FaqItem[]\r\n  allowMultiple?: boolean\r\n  defaultOpenIndices?: number[]\r\n}\r\n\r\nfunction useMeasuredHeight(isOpen: boolean) {\r\n  const ref = useRef<HTMLDivElement | null>(null)\r\n  const [height, setHeight] = useState<number>(0)\r\n  useEffect(() => {\r\n    const el = ref.current\r\n    if (!el) return\r\n    const measure = () => setHeight(el.scrollHeight)\r\n    measure()\r\n    const ro = new ResizeObserver(measure)\r\n    ro.observe(el)\r\n    return () => ro.disconnect()\r\n  }, [])\r\n  return { ref, height, isOpen }\r\n}\r\n\r\nfunction Chevron({ open }: { open: boolean }) {\r\n  return (\r\n    <svg\r\n      className={`h-5 w-5 transition-transform duration-300 ${open ? \"rotate-180\" : \"rotate-0\"}`}\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <path fillRule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clipRule=\"evenodd\" />\r\n    </svg>\r\n  )\r\n}\r\n\r\nfunction renderAnswer(answer: string) {\r\n  const blocks = answer\r\n    .split(/\\n\\s*\\n/)\r\n    .map(b => b.trim())\r\n    .filter(Boolean)\r\n\r\n  return (\r\n    <div className=\"space-y-3 leading-relaxed text-sm md:text-base\">\r\n      {blocks.map((block, i) => {\r\n        const lines = block.split(/\\n/).map(l => l.trim()).filter(Boolean)\r\n        const looksLikeList = lines.length > 1 && lines.every(l => /^(-|\\d+[\\.)\\-]?\\s+)/.test(l) || /^\\d+\\s/.test(l))\r\n        if (looksLikeList) {\r\n          return (\r\n            <ul key={i} className=\"list-disc pl-5 space-y-1\">\r\n              {lines.map((l, idx) => (\r\n                <li key={idx}>{l.replace(/^(-|\\d+[\\.)\\-]?\\s+)/, \"\")}</li>\r\n              ))}\r\n            </ul>\r\n          )\r\n        }\r\n        return <p key={i} className=\"opacity-90\">{block}</p>\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function Accordion({ items, allowMultiple = true, defaultOpenIndices = [] }: AccordionProps) {\r\n  const [openSet, setOpenSet] = useState<Set<number>>(new Set(defaultOpenIndices))\r\n\r\n  const toggle = (idx: number) => {\r\n    setOpenSet(prev => {\r\n      const next = new Set(prev)\r\n      if (next.has(idx)) next.delete(idx)\r\n      else {\r\n        if (!allowMultiple) next.clear()\r\n        next.add(idx)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  const initialStagger = useMemo(() => Math.min(items.length, 6), [items.length])\r\n\r\n  return (\r\n    <div className=\"rounded-2xl border border-black/10 bg-white/80 backdrop-blur divide-y divide-black/10 shadow-sm\">\r\n      {items.map((item, idx) => {\r\n        const open = openSet.has(idx)\r\n        const { ref, height } = useMeasuredHeight(open)\r\n        return (\r\n          <div key={idx} className=\"group\">\r\n            <button\r\n              type=\"button\"\r\n              aria-expanded={open}\r\n              aria-controls={`faq-panel-${idx}`}\r\n              onClick={() => toggle(idx)}\r\n              className=\"w-full text-left px-4 md:px-6 py-4 flex items-center justify-between gap-4 focus:outline-none focus-visible:ring-2 focus-visible:ring-black/20\"\r\n              style={{\r\n                transitionDelay: idx < initialStagger ? `${idx * 30}ms` : undefined,\r\n              }}\r\n            >\r\n              <span className=\"text-base md:text-lg font-medium tracking-tight\">{item.question}</span>\r\n              <Chevron open={open} />\r\n            </button>\r\n            <div\r\n              id={`faq-panel-${idx}`}\r\n              role=\"region\"\r\n              className=\"px-4 md:px-6 overflow-hidden\"\r\n              style={{ height: open ? height : 0, transition: \"height 300ms ease\" }}\r\n            >\r\n              <div\r\n                ref={ref}\r\n                className={`pb-5 md:pb-6 ${open ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-1\"}`}\r\n                style={{ transition: \"opacity 300ms ease, transform 300ms ease\" }}\r\n              >\r\n                {renderAnswer(item.answer)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}