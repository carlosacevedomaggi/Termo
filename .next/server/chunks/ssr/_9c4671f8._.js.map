{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.tsx","turbopack:///[project]/node_modules/next/src/shared/lib/encode-uri-path.ts","turbopack:///[project]/node_modules/next/src/shared/lib/lazy-dynamic/preload-chunks.tsx","turbopack:///[project]/node_modules/next/src/shared/lib/lazy-dynamic/loadable.tsx","turbopack:///[project]/node_modules/next/src/shared/lib/app-dynamic.tsx","turbopack:///[project]/node_modules/lodash.debounce/index.js","turbopack:///[project]/src/app/checkout/page.tsx","turbopack:///[project]/src/shared/payments.ts","turbopack:///[project]/src/app/checkout/components/LocationStep.tsx","turbopack:///[project]/src/lib/maps.ts","turbopack:///[project]/src/lib/partners.ts"],"sourcesContent":["'use client'\n\nimport type { ReactElement } from 'react'\nimport { BailoutToCSRError } from './bailout-to-csr'\n\ninterface BailoutToCSRProps {\n  reason: string\n  children: ReactElement\n}\n\n/**\n * If rendered on the server, this component throws an error\n * to signal Next.js that it should bail out to client-side rendering instead.\n */\nexport function BailoutToCSR({ reason, children }: BailoutToCSRProps) {\n  if (typeof window === 'undefined') {\n    throw new BailoutToCSRError(reason)\n  }\n\n  return children\n}\n","export function encodeURIPath(file: string) {\n  return file\n    .split('/')\n    .map((p) => encodeURIComponent(p))\n    .join('/')\n}\n","'use client'\n\nimport { preload } from 'react-dom'\n\nimport { workAsyncStorage } from '../../../server/app-render/work-async-storage.external'\nimport { encodeURIPath } from '../encode-uri-path'\n\nexport function PreloadChunks({\n  moduleIds,\n}: {\n  moduleIds: string[] | undefined\n}) {\n  // Early return in client compilation and only load requestStore on server side\n  if (typeof window !== 'undefined') {\n    return null\n  }\n\n  const workStore = workAsyncStorage.getStore()\n  if (workStore === undefined) {\n    return null\n  }\n\n  const allFiles = []\n\n  // Search the current dynamic call unique key id in react loadable manifest,\n  // and find the corresponding CSS files to preload\n  if (workStore.reactLoadableManifest && moduleIds) {\n    const manifest = workStore.reactLoadableManifest\n    for (const key of moduleIds) {\n      if (!manifest[key]) continue\n      const chunks = manifest[key].files\n      allFiles.push(...chunks)\n    }\n  }\n\n  if (allFiles.length === 0) {\n    return null\n  }\n\n  const dplId = process.env.NEXT_DEPLOYMENT_ID\n    ? `?dpl=${process.env.NEXT_DEPLOYMENT_ID}`\n    : ''\n\n  return (\n    <>\n      {allFiles.map((chunk) => {\n        const href = `${workStore.assetPrefix}/_next/${encodeURIPath(chunk)}${dplId}`\n        const isCss = chunk.endsWith('.css')\n        // If it's stylesheet we use `precedence` o help hoist with React Float.\n        // For stylesheets we actually need to render the CSS because nothing else is going to do it so it needs to be part of the component tree.\n        // The `preload` for stylesheet is not optional.\n        if (isCss) {\n          return (\n            <link\n              key={chunk}\n              // @ts-ignore\n              precedence=\"dynamic\"\n              href={href}\n              rel=\"stylesheet\"\n              as=\"style\"\n            />\n          )\n        } else {\n          // If it's script we use ReactDOM.preload to preload the resources\n          preload(href, {\n            as: 'script',\n            fetchPriority: 'low',\n          })\n          return null\n        }\n      })}\n    </>\n  )\n}\n","import { Suspense, Fragment, lazy } from 'react'\nimport { BailoutToCSR } from './dynamic-bailout-to-csr'\nimport type { ComponentModule } from './types'\nimport { PreloadChunks } from './preload-chunks'\n\n// Normalize loader to return the module as form { default: Component } for `React.lazy`.\n// Also for backward compatible since next/dynamic allows to resolve a component directly with loader\n// Client component reference proxy need to be converted to a module.\nfunction convertModule<P>(\n  mod: React.ComponentType<P> | ComponentModule<P> | undefined\n): {\n  default: React.ComponentType<P>\n} {\n  // Check \"default\" prop before accessing it, as it could be client reference proxy that could break it reference.\n  // Cases:\n  // mod: { default: Component }\n  // mod: Component\n  // mod: { default: proxy(Component) }\n  // mod: proxy(Component)\n  const hasDefault = mod && 'default' in mod\n  return {\n    default: hasDefault\n      ? (mod as ComponentModule<P>).default\n      : (mod as React.ComponentType<P>),\n  }\n}\n\nconst defaultOptions = {\n  loader: () => Promise.resolve(convertModule(() => null)),\n  loading: null,\n  ssr: true,\n}\n\ninterface LoadableOptions {\n  loader?: () => Promise<React.ComponentType<any> | ComponentModule<any>>\n  loading?: React.ComponentType<any> | null\n  ssr?: boolean\n  modules?: string[]\n}\n\nfunction Loadable(options: LoadableOptions) {\n  const opts = { ...defaultOptions, ...options }\n  const Lazy = lazy(() => opts.loader().then(convertModule))\n  const Loading = opts.loading\n\n  function LoadableComponent(props: any) {\n    const fallbackElement = Loading ? (\n      <Loading isLoading={true} pastDelay={true} error={null} />\n    ) : null\n\n    // If it's non-SSR or provided a loading component, wrap it in a suspense boundary\n    const hasSuspenseBoundary = !opts.ssr || !!opts.loading\n    const Wrap = hasSuspenseBoundary ? Suspense : Fragment\n    const wrapProps = hasSuspenseBoundary ? { fallback: fallbackElement } : {}\n    const children = opts.ssr ? (\n      <>\n        {/* During SSR, we need to preload the CSS from the dynamic component to avoid flash of unstyled content */}\n        {typeof window === 'undefined' ? (\n          <PreloadChunks moduleIds={opts.modules} />\n        ) : null}\n        <Lazy {...props} />\n      </>\n    ) : (\n      <BailoutToCSR reason=\"next/dynamic\">\n        <Lazy {...props} />\n      </BailoutToCSR>\n    )\n\n    return <Wrap {...wrapProps}>{children}</Wrap>\n  }\n\n  LoadableComponent.displayName = 'LoadableComponent'\n\n  return LoadableComponent\n}\n\nexport default Loadable\n","import type React from 'react'\nimport type { JSX } from 'react'\nimport Loadable from './lazy-dynamic/loadable'\n\nimport type {\n  LoadableGeneratedOptions,\n  DynamicOptionsLoadingProps,\n  Loader,\n  LoaderComponent,\n} from './lazy-dynamic/types'\n\nexport {\n  type LoadableGeneratedOptions,\n  type DynamicOptionsLoadingProps,\n  type Loader,\n  type LoaderComponent,\n}\n\nexport type DynamicOptions<P = {}> = LoadableGeneratedOptions & {\n  loading?: () => JSX.Element | null\n  loader?: Loader<P>\n  loadableGenerated?: LoadableGeneratedOptions\n  modules?: string[]\n  ssr?: boolean\n}\n\nexport type LoadableOptions<P = {}> = DynamicOptions<P>\n\nexport type LoadableFn<P = {}> = (\n  opts: LoadableOptions<P>\n) => React.ComponentType<P>\n\nexport type LoadableComponent<P = {}> = React.ComponentType<P>\n\nexport default function dynamic<P = {}>(\n  dynamicOptions: DynamicOptions<P> | Loader<P>,\n  options?: DynamicOptions<P>\n): React.ComponentType<P> {\n  const loadableOptions: LoadableOptions<P> = {}\n\n  if (typeof dynamicOptions === 'function') {\n    loadableOptions.loader = dynamicOptions\n  }\n\n  const mergedOptions = {\n    ...loadableOptions,\n    ...options,\n  }\n\n  return Loadable({\n    ...mergedOptions,\n    modules: mergedOptions.loadableGenerated?.modules,\n  })\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\n\nimport { useCartStore } from \"@/store/cart\"\nimport { PAYMENT_METHODS } from \"@/shared/payments\"\nimport { usePayPalConfig } from \"../PayPalProvider\"\nimport LocationStep, { LocationStepValues } from \"./components/LocationStep\"\nimport { getPartnerById, getPartnersByType } from \"@/lib/partners\"\nimport { sortPartnersByDistance } from \"@/lib/maps\"\n\ntype Step = 1 | 2 | 3 | 4\n\ntype DeliveryInfo = {\n  partnerId: string\n  partnerName: string\n  partnerAddress: string\n  partnerCityState: string\n  minutes: number\n  minutesCapped: number\n  fee: number\n  distanceMeters: number | null\n  source: \"ors\" | \"fallback\"\n}\n\ntype OrderResult = {\n  id: string\n  status: string\n}\n\nexport default function CheckoutPage() {\n  const router = useRouter()\n  const { items, clear } = useCartStore()\n  const [isHydrated, setIsHydrated] = useState(false)\n\n  useEffect(() => {\n    setIsHydrated(true)\n  }, [])\n\n  const distributors = useMemo(() => getPartnersByType(\"distributor\"), [])\n\n  const baseTotal = useMemo(() => items.reduce((acc, item) => acc + item.price * (item.quantity ?? 1), 0), [items])\n  const orderItems = useMemo(\n    () =>\n      items.map((item) => ({\n        key: item.id,\n        name: item.name,\n        quantity: item.quantity ?? 1,\n        total: item.price * (item.quantity ?? 1),\n      })),\n    [items]\n  )\n\n  const [step, setStep] = useState<Step>(1)\n  const [locationValues, setLocationValues] = useState<LocationStepValues>({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    fulfillmentMode: \"pickup\",\n    customerLocation: null,\n    selectedPartnerId: null,\n  })\n  const [locationErrors, setLocationErrors] = useState<Record<string, string>>({})\n  const [deliveryInfo, setDeliveryInfo] = useState<DeliveryInfo | null>(null)\n\n  useEffect(() => {\n    if (!locationValues.customerLocation) {\n      setDeliveryInfo(null)\n      return\n    }\n    if (locationValues.fulfillmentMode !== \"delivery\" || !locationValues.selectedPartnerId) {\n      setDeliveryInfo(null)\n      return\n    }\n    const partner = getPartnerById(locationValues.selectedPartnerId)\n    if (!partner) {\n      setDeliveryInfo(null)\n      return\n    }\n    fetchDirections(\n      locationValues.customerLocation.lat,\n      locationValues.customerLocation.lng,\n      {\n        id: partner.id,\n        name: partner.name,\n        address: partner.address,\n        cityState: partner.cityState,\n        lat: partner.lat,\n        lng: partner.lng,\n      }\n    ).then((result) => {\n      if (result) {\n        setDeliveryInfo(result)\n      }\n    })\n  }, [locationValues.customerLocation, locationValues.fulfillmentMode, locationValues.selectedPartnerId])\n\n  async function fetchDirections(\n    customerLat: number,\n    customerLng: number,\n    partner: { id: string; name: string; address: string; cityState: string; lat: number; lng: number }\n  ): Promise<DeliveryInfo | null> {\n    try {\n      const response = await fetch(\"/api/directions\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          start: { lat: customerLat, lng: customerLng },\n          end: { lat: partner.lat, lng: partner.lng },\n        }),\n      })\n      if (!response.ok) {\n        const text = await response.text()\n        console.warn(\"Directions failed\", text)\n        return fallbackDeliveryInfo(customerLat, customerLng, partner)\n      }\n      const data = await response.json()\n      const durationMinutes = Math.round((data.duration ?? 0) / 60)\n      const minutesCapped = Math.min(durationMinutes, 45)\n      const fee = minutesCapped * 0.5\n      return {\n        partnerId: partner.id,\n        partnerName: partner.name,\n        partnerAddress: partner.address,\n        partnerCityState: partner.cityState,\n        minutes: durationMinutes,\n        minutesCapped,\n        fee,\n        distanceMeters: data.distance ?? null,\n        source: \"ors\",\n      }\n    } catch (error) {\n      console.warn(\"Directions error\", error)\n      return fallbackDeliveryInfo(customerLat, customerLng, partner)\n    }\n  }\n\n  function fallbackDeliveryInfo(\n    customerLat: number,\n    customerLng: number,\n    partner: { id: string; name: string; address: string; cityState: string; lat: number; lng: number }\n  ): DeliveryInfo {\n    const distanceMeters = calculateDistance(customerLat, customerLng, partner.lat, partner.lng)\n    const averageSpeedKmh = 40\n    const timeHours = distanceMeters / 1000 / averageSpeedKmh\n    const durationMinutes = Math.round(timeHours * 60)\n    const minutesCapped = Math.max(10, Math.min(durationMinutes, 45))\n    const fee = minutesCapped * 0.5\n    return {\n      partnerId: partner.id,\n      partnerName: partner.name,\n      partnerAddress: partner.address,\n      partnerCityState: partner.cityState,\n      minutes: durationMinutes,\n      minutesCapped,\n      fee,\n      distanceMeters,\n      source: \"fallback\",\n    }\n  }\n\n  const [paymentMethodId, setPaymentMethodId] = useState<string>(PAYMENT_METHODS[0]?.id ?? \"paypal\")\n  const selectedMethod = useMemo(() => PAYMENT_METHODS.find((method) => method.id === paymentMethodId)!, [paymentMethodId])\n  const [paymentFields, setPaymentFields] = useState<Record<string, string>>({})\n  const [paymentErrors, setPaymentErrors] = useState<Record<string, string>>({})\n  const [receiptPreference, setReceiptPreference] = useState<\"email\" | \"phone\">(\"email\")\n  const [paypalOrderId, setPaypalOrderId] = useState<string | null>(null)\n  const [orderResult, setOrderResult] = useState<OrderResult | null>(null)\n  const [submitState, setSubmitState] = useState<\"idle\" | \"processing\">(\"idle\")\n  const [submittedSummary, setSubmittedSummary] = useState<{\n    items: { key: string; name: string; quantity: number; total: number }[]\n    baseTotal: number\n    deliveryFee: number\n    orderTotal: number\n  } | null>(null)\n  const { isConfigured: isPayPalConfigured } = usePayPalConfig()\n\n  const deliveryFee = locationValues.fulfillmentMode === \"delivery\" && deliveryInfo ? deliveryInfo.fee : 0\n  const orderTotal = baseTotal + deliveryFee\n\n  const phoneMasked = locationValues.phone ? `***-${locationValues.phone.slice(-3)}` : \"No proporcionado\"\n\n  const canContinueStep2 =\n    (locationValues.fulfillmentMode === \"pickup\" && locationValues.selectedPartnerId) ||\n    (locationValues.fulfillmentMode === \"delivery\" && deliveryInfo)\n  const paypalSelected = paymentMethodId === \"paypal\" || paymentMethodId === \"card\"\n  const canContinueStep3 = submitState !== \"processing\"\n\n  if (!items.length && !submittedSummary && step !== 4) {\n    return (\n      <div className=\"container-edge py-16 text-center\">\n        <h1 className=\"text-2xl font-semibold\">Tu carrito está vacío</h1>\n        <p className=\"mt-3 text-sm text-slate-600\">Agrega productos para iniciar el proceso de compra.</p>\n      </div>\n    )\n  }\n\n  if (!isHydrated) {\n    return (\n      <div className=\"container-edge py-16 text-center\">\n        <h1 className=\"text-2xl font-semibold\">Checkout</h1>\n        <p className=\"mt-2 text-sm text-slate-600\">Cargando detalles del pedido…</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container-edge py-12\">\n      <h1 className=\"text-3xl font-semibold\">Checkout</h1>\n      <Stepper currentStep={step} />\n      <div className=\"mt-8 grid gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(320px,0.7fr)]\">\n        <div className=\"space-y-6\">\n          {step === 1 && (\n            <StepCard title=\"1. Información y ubicación\">\n              <LocationStep\n                partners={distributors}\n                value={locationValues}\n                onChange={(updated) => setLocationValues(updated)}\n                errors={locationErrors}\n                onErrorsChange={setLocationErrors}\n                onComplete={() => setStep(2)}\n              />\n            </StepCard>\n          )}\n\n          {step === 2 && (\n            <StepCard title=\"2. Entrega y método de pago\">\n              <section className=\"space-y-4\">\n                <h3 className=\"text-sm font-semibold uppercase tracking-[0.25em] text-slate-500\">Modalidad</h3>\n                <div className=\"grid gap-3 md:grid-cols-2\">\n                  <OptionButton\n                    label=\"Retiro en distribuidor\"\n                    description=\"Elige el punto aliado más conveniente para retirar tu pedido.\"\n                    selected={locationValues.fulfillmentMode === \"pickup\"}\n                    onClick={() => {\n                      setLocationValues((prev) => ({ ...prev, fulfillmentMode: \"pickup\" }))\n                      setDeliveryInfo(null)\n                    }}\n                  />\n                  <OptionButton\n                    label=\"Entrega a domicilio\"\n                    description=\"Coordinamos con el aliado más cercano y calculamos el cargo de envío.\"\n                    selected={locationValues.fulfillmentMode === \"delivery\"}\n                    onClick={async () => {\n                      const partner = locationValues.selectedPartnerId\n                        ? getPartnerById(locationValues.selectedPartnerId)\n                        : null\n                      setLocationValues((prev) => ({ ...prev, fulfillmentMode: \"delivery\" }))\n                      if (partner && locationValues.customerLocation) {\n                        fetchDirections(\n                          locationValues.customerLocation.lat,\n                          locationValues.customerLocation.lng,\n                          {\n                            id: partner.id,\n                            name: partner.name,\n                            address: partner.address,\n                            cityState: partner.cityState,\n                            lat: partner.lat,\n                            lng: partner.lng,\n                          }\n                        ).then((result) => {\n                          if (result) setDeliveryInfo(result)\n                        })\n                      }\n                    }}\n                  />\n            </div>\n              </section>\n\n              <section className=\"mt-6 space-y-3\">\n                <h3 className=\"text-sm font-semibold uppercase tracking-[0.25em] text-slate-500\">\n                  {locationValues.fulfillmentMode === \"pickup\" ? \"Aliado seleccionado\" : \"Entrega coordinada\"}\n                </h3>\n                <FulfillmentSummary\n                  fulfillmentMode={locationValues.fulfillmentMode}\n                  selectedPartnerId={locationValues.selectedPartnerId}\n                  deliveryInfo={deliveryInfo}\n                  customerLocation={locationValues.customerLocation}\n                />\n              </section>\n\n              <section className=\"mt-6 space-y-3\">\n                <h3 className=\"text-sm font-semibold uppercase tracking-[0.25em] text-slate-500\">Método de pago</h3>\n            <div className=\"grid gap-3\">\n                  {PAYMENT_METHODS.map((method) => (\n                    <label\n                      key={method.id}\n                      className={`rounded-xl border p-3 transition ${\n                        paymentMethodId === method.id\n                          ? \"border-slate-900 bg-slate-900/5\"\n                          : \"border-slate-200 hover:border-slate-300\"\n                      }`}\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        <input\n                          type=\"radio\"\n                          className=\"mt-1 accent-slate-900\"\n                          checked={paymentMethodId === method.id}\n                          onChange={() => setPaymentMethodId(method.id)}\n                        />\n                    <div className=\"flex-1\">\n                          <div className=\"flex flex-wrap items-center gap-2\">\n                            <span className=\"font-semibold text-slate-900\">{method.label}</span>\n                            <span className=\"rounded-full bg-slate-900/5 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-slate-600\">\n                              {method.currency}\n                            </span>\n                      </div>\n                          {method.description && (\n                            <p className=\"mt-1 text-sm text-slate-600\">{method.description}</p>\n                          )}\n                    </div>\n                  </div>\n                </label>\n              ))}\n            </div>\n              </section>\n\n              <StepActions\n                onBack={() => setStep(1)}\n                onNext={() => setStep(3)}\n                nextDisabled={!canContinueStep2}\n                nextLabel=\"Confirmar medios\"\n                backLabel=\"Regresar\"\n              />\n            </StepCard>\n          )}\n\n          {step === 3 && (\n            <StepCard title=\"3. Pago y recibo\">\n              <section className=\"space-y-4\">\n                <InstructionsList method={selectedMethod} />\n\n                {selectedMethod.fields.length > 0 && (\n            <div className=\"grid gap-4\">\n                    {selectedMethod.fields.map((field) => (\n                      <div key={field.id}>\n                        <label className=\"text-sm font-medium text-slate-700\">{field.label}</label>\n                        {field.type === \"select\" ? (\n                          <select\n                            className=\"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200\"\n                            value={paymentFields[field.id] ?? \"\"}\n                            onChange={(event) =>\n                              setPaymentFields((prev) => ({ ...prev, [field.id]: event.target.value }))\n                            }\n                          >\n                            <option value=\"\">Selecciona…</option>\n                            {(field.options ?? []).map((option) => (\n                              <option key={option.value} value={option.value}>\n                                {option.label}\n                              </option>\n                            ))}\n                    </select>\n                  ) : (\n                          <input\n                            type={field.type === \"email\" ? \"email\" : \"text\"}\n                            placeholder={field.placeholder}\n                            className=\"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200\"\n                            value={paymentFields[field.id] ?? \"\"}\n                            onChange={(event) =>\n                              setPaymentFields((prev) => ({ ...prev, [field.id]: event.target.value }))\n                            }\n                          />\n                        )}\n                        {paymentErrors[field.id] && (\n                          <p className=\"mt-1 text-xs text-red-600\">{paymentErrors[field.id]}</p>\n                        )}\n                </div>\n              ))}\n            </div>\n                )}\n\n                {paypalSelected && (\n                  <div className=\"rounded-xl border border-blue-200 bg-blue-50 px-4 py-3 text-sm text-blue-800\">\n                    {isPayPalConfigured\n                      ? \"El pago con PayPal/Tarjeta será simulado en este entorno.\"\n                      : \"Sin PayPal configurado: la simulación aprobará el pago automáticamente. Para producción, reemplaza este bloque con PayPalButtons.\"}\n                  </div>\n                )}\n\n                <section className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-slate-700\">¿Cómo prefieres recibir tu comprobante?</h4>\n                  <div className=\"grid gap-2 md:grid-cols-2\">\n                    <label\n                      className={`rounded-xl border px-3 py-2 text-sm ${\n                        receiptPreference === \"email\"\n                          ? \"border-slate-900 bg-slate-900/5\"\n                          : \"border-slate-200 hover:border-slate-300\"\n                      }`}\n                    >\n                      <input\n                        type=\"radio\"\n                        name=\"receipt\"\n                        className=\"mr-2 accent-slate-900\"\n                        checked={receiptPreference === \"email\"}\n                        onChange={() => setReceiptPreference(\"email\")}\n                      />\n                      Enviar al correo: <span className=\"font-medium\">{locationValues.email}</span>\n                    </label>\n                    <label\n                      className={`rounded-xl border px-3 py-2 text-sm ${\n                        receiptPreference === \"phone\"\n                          ? \"border-slate-900 bg-slate-900/5\"\n                          : \"border-slate-200 hover:border-slate-300\"\n                      }`}\n                    >\n                      <input\n                        type=\"radio\"\n                        name=\"receipt\"\n                        className=\"mr-2 accent-slate-900\"\n                        checked={receiptPreference === \"phone\"}\n                        onChange={() => setReceiptPreference(\"phone\")}\n                        disabled={!locationValues.phone}\n                      />\n                      WhatsApp ({phoneMasked})\n                      {!locationValues.phone && (\n                        <span className=\"ml-2 text-xs text-slate-500\">Agrega un número en el paso 1</span>\n                      )}\n                    </label>\n          </div>\n                </section>\n              </section>\n\n              <StepActions\n                onBack={() => setStep(2)}\n                onNext={async () => {\n                  const fieldErrors: Record<string, string> = {}\n                  selectedMethod.fields.forEach((field) => {\n                    if (field.required && !paymentFields[field.id]) {\n                      fieldErrors[field.id] = \"Requerido\"\n                    }\n                  })\n                  if (receiptPreference === \"phone\" && !locationValues.phone) {\n                    fieldErrors.receipt = \"Debes registrar un número de teléfono\"\n                  }\n                  setPaymentErrors(fieldErrors)\n                  if (Object.keys(fieldErrors).length > 0) {\n                    return\n                  }\n\n                  setSubmitState(\"processing\")\n                  try {\n                    const payload = {\n                      name: locationValues.name,\n                      email: locationValues.email,\n                      phone: locationValues.phone || null,\n                      address: locationValues.customerLocation?.label ?? \"\",\n                      method: paymentMethodId,\n                      currency: selectedMethod.currency,\n                      amount: Math.round(orderTotal * 100),\n                      items: orderItems.map((item) => ({\n                        id: item.key,\n                        name: item.name,\n                        price: Math.round((item.total / item.quantity) * 100),\n                        quantity: item.quantity,\n                      })),\n                      reference: (() => {\n                        if (paypalSelected) {\n                          const generated = paypalOrderId ?? `mock-paypal-${Date.now()}`\n                          setPaypalOrderId(generated)\n                          return generated\n                        }\n                        return paymentFields.reference ?? null\n                      })(),\n                      receiptPreference,\n                      manualPaymentMethod: paymentMethodId,\n                      fulfillmentType: locationValues.fulfillmentMode === \"pickup\" ? \"PICKUP\" : \"DELIVERY\",\n                      pickupLocationId: locationValues.selectedPartnerId,\n                      pickupLocationName: getPartnerById(locationValues.selectedPartnerId)?.name ?? null,\n                      pickupLocationAddress: getPartnerById(locationValues.selectedPartnerId)?.address ?? null,\n                      fulfillmentLocationId: locationValues.selectedPartnerId,\n                      deliveryEtaMinutes: deliveryInfo?.minutes ?? null,\n                      deliveryFee: deliveryInfo ? Math.round(deliveryInfo.fee * 100) : 0,\n                      customerCoordinates: locationValues.customerLocation\n                        ? {\n                            lat: locationValues.customerLocation.lat,\n                            lng: locationValues.customerLocation.lng,\n                          }\n                        : null,\n                      partnerCoordinates: locationValues.selectedPartnerId\n                        ? {\n                            lat: getPartnerById(locationValues.selectedPartnerId!)?.lat ?? null,\n                            lng: getPartnerById(locationValues.selectedPartnerId!)?.lng ?? null,\n                          }\n                        : null,\n                      metadata: {\n                        ...paymentFields,\n                        ...(paypalSelected ? { simulation: true } : {}),\n                        customerCoordinates: locationValues.customerLocation,\n                        partnerCoordinates: locationValues.selectedPartnerId\n                          ? {\n                              lat: getPartnerById(locationValues.selectedPartnerId!)?.lat ?? null,\n                              lng: getPartnerById(locationValues.selectedPartnerId!)?.lng ?? null,\n                            }\n                          : null,\n                      },\n                    }\n\n                    console.log(\"submit-order payload:\\n\" + JSON.stringify(payload, null, 2))\n\n                    const response = await fetch(\"/api/orders\", {\n                      method: \"POST\",\n                      headers: { \"Content-Type\": \"application/json\" },\n                      body: JSON.stringify(payload),\n                    })\n                    if (!response.ok) {\n                      throw new Error(\"Order creation failed\")\n                    }\n                    const data = (await response.json()) as OrderResult\n                    const snapshotItems = orderItems.map((item) => ({ ...item }))\n                    setSubmittedSummary({\n                      items: snapshotItems,\n                      baseTotal,\n                      deliveryFee,\n                      orderTotal,\n                    })\n                    setOrderResult(data)\n                    setStep(4)\n                    setTimeout(() => clear(), 0)\n                  } catch (error) {\n                    console.error(error)\n                    setPaymentErrors((prev) => ({ ...prev, root: \"No se pudo procesar el pedido. Intenta nuevamente.\" }))\n                  } finally {\n                    setSubmitState(\"idle\")\n                  }\n                }}\n                nextDisabled={!canContinueStep3 || submitState === \"processing\"}\n                nextLabel=\"Confirmar pedido\"\n                backLabel=\"Regresar\"\n              />\n              {paymentErrors.root && <p className=\"mt-3 text-sm text-red-600\">{paymentErrors.root}</p>}\n            </StepCard>\n          )}\n\n          {step === 4 && (\n            <StepCard title=\"4. Confirmación\">\n              <div className=\"space-y-4\">\n                <h2 className=\"text-2xl font-semibold text-slate-900\">\n                  {orderResult?.status === \"paid\"\n                    ? \"¡Gracias por su compra!\"\n                    : \"Gracias por su pedido\"}\n                </h2>\n                <p className=\"text-sm text-slate-700\">\n                  {orderResult?.status === \"paid\"\n                    ? \"Hemos registrado el pago y enviaremos el comprobante según su preferencia.\"\n                    : \"Su solicitud quedó en revisión. Validaremos el pago manual en menos de 48 horas y recibirá su comprobante.\"}\n                </p>\n                <div className=\"rounded-xl border border-slate-200 bg-white p-4 text-sm text-slate-700\">\n                  <p>\n                    <span className=\"font-semibold\">Número de seguimiento:</span> {orderResult?.id ?? \"-\"}\n                  </p>\n                  <p className=\"mt-2\">\n                    <span className=\"font-semibold\">Recibo vía:</span> {receiptPreference === \"email\" ? locationValues.email : phoneMasked}\n                  </p>\n                </div>\n                <button\n                  className=\"btn btn-outline\"\n                  onClick={() => router.push(\"/\")}\n                >\n                  Volver al inicio\n                </button>\n              </div>\n            </StepCard>\n          )}\n        </div>\n\n        <aside className=\"space-y-4\">\n          <OrderSummary\n            items={submittedSummary?.items ?? orderItems}\n            baseTotal={submittedSummary?.baseTotal ?? baseTotal}\n            deliveryFee={submittedSummary?.deliveryFee ?? deliveryFee}\n            orderTotal={submittedSummary?.orderTotal ?? orderTotal}\n            deliveryInfo={locationValues.fulfillmentMode === \"delivery\" ? deliveryInfo : null}\n          />\n        </aside>\n      </div>\n    </div>\n  )\n}\n\nfunction Stepper({ currentStep }: { currentStep: Step }) {\n  const steps = [\n    \"Información\",\n    \"Entrega\",\n    \"Pago\",\n    \"Confirmación\",\n  ]\n  return (\n    <div className=\"mt-6 grid gap-3 md:grid-cols-4\">\n      {steps.map((label, index) => {\n        const stepNumber = (index + 1) as Step\n        const completed = currentStep > stepNumber\n        const active = currentStep === stepNumber\n        return (\n          <div\n            key={label}\n            className={`rounded-2xl border px-4 py-3 text-sm transition ${\n              active\n                ? \"border-slate-900 bg-slate-900 text-white\"\n                : completed\n                ? \"border-emerald-400 bg-emerald-50 text-emerald-700\"\n                : \"border-slate-200 bg-white text-slate-600\"\n            }`}\n          >\n            <div className=\"text-xs uppercase tracking-[0.3em]\">Paso {index + 1}</div>\n            <div className=\"mt-1 font-semibold\">{label}</div>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nfunction StepCard({ title, children }: { title: string; children: React.ReactNode }) {\n  return (\n    <div className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm\">\n      <h2 className=\"text-lg font-semibold text-slate-900\">{title}</h2>\n      <div className=\"mt-4 space-y-4\">{children}</div>\n              </div>\n  )\n}\n\nfunction Field({\n  label,\n  id,\n  value,\n  onChange,\n  error,\n  type = \"text\",\n  required,\n  className,\n}: {\n  label: string\n  id: string\n  value: string\n  onChange: (value: string) => void\n  error?: string\n  type?: string\n  required?: boolean\n  className?: string\n}) {\n  return (\n    <label className={`block ${className ?? \"\"}`} htmlFor={id}>\n      <span className=\"text-sm font-medium text-slate-700\">{label}</span>\n      <input\n        id={id}\n        type={type}\n        required={required}\n        value={value}\n        onChange={(event) => onChange(event.target.value)}\n        className=\"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200\"\n      />\n      {error && <span className=\"mt-1 block text-xs text-red-600\">{error}</span>}\n    </label>\n  )\n}\n\nfunction StepActions({\n  onBack,\n  onNext,\n  nextDisabled,\n  nextLabel,\n  backLabel,\n}: {\n  onBack?: () => void\n  onNext: () => void | Promise<void>\n  nextDisabled?: boolean\n  nextLabel: string\n  backLabel?: string\n}) {\n  return (\n    <div className=\"flex flex-col gap-3 pt-4 sm:flex-row sm:justify-end\">\n      {onBack && (\n        <button onClick={onBack} type=\"button\" className=\"btn btn-outline sm:w-auto\">\n          {backLabel ?? \"Anterior\"}\n        </button>\n      )}\n      <button\n        type=\"button\"\n        className=\"btn btn-primary sm:w-auto\"\n        disabled={nextDisabled}\n        onClick={onNext}\n      >\n        {nextLabel}\n      </button>\n          </div>\n  )\n}\n\nfunction OptionButton({\n  label,\n  description,\n  selected,\n  onClick,\n}: {\n  label: string\n  description: string\n  selected: boolean\n  onClick: () => void\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`rounded-2xl border px-4 py-3 text-left transition ${\n        selected ? \"border-slate-900 bg-slate-900/5\" : \"border-slate-200 hover:border-slate-300\"\n      }`}\n    >\n      <div className=\"font-semibold text-slate-900\">{label}</div>\n      <p className=\"mt-1 text-xs text-slate-600\">{description}</p>\n    </button>\n  )\n}\n\nfunction PickupChooser({\n  options,\n  selectedId,\n  onSelect,\n}: {\n  options: PickupOption[]\n  selectedId: string\n  onSelect: (id: string) => void\n}) {\n  if (!options.length) {\n    return (\n      <div className=\"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600\">\n        Completa tu dirección para sugerirte aliados cercanos o contáctanos para coordinar la entrega.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {options.map((option, index) => (\n        <label\n          key={option.id}\n          className={`flex items-start gap-3 rounded-2xl border px-4 py-3 transition ${\n            selectedId === option.id\n              ? \"border-slate-900 bg-slate-900/5\"\n              : \"border-slate-200 hover:border-slate-300\"\n          }`}\n        >\n          <input\n            type=\"radio\"\n            className=\"mt-1 accent-slate-900\"\n            checked={selectedId === option.id}\n            onChange={() => onSelect(option.id)}\n          />\n          <div>\n            <div className=\"flex items-center gap-2 text-sm font-semibold text-slate-900\">\n              {option.name}\n              {index === 0 && (\n                <span className=\"rounded-full bg-emerald-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-emerald-700\">\n                  Recomendado\n                </span>\n              )}\n            </div>\n            <p className=\"text-xs text-slate-600\">{option.address}</p>\n            <p className=\"text-[11px] uppercase tracking-wide text-slate-400\">{option.cityState}</p>\n            </div>\n        </label>\n          ))}\n        </div>\n  )\n}\n\nfunction FulfillmentSummary({\n  fulfillmentMode,\n  selectedPartnerId,\n  deliveryInfo,\n  customerLocation,\n}: {\n  fulfillmentMode: \"pickup\" | \"delivery\"\n  selectedPartnerId: string | null\n  deliveryInfo: DeliveryInfo | null\n  customerLocation: { lat: number; lng: number; label: string } | null\n}) {\n  const partner = selectedPartnerId ? getPartnerById(selectedPartnerId) : null\n\n  if (!partner) {\n    return (\n      <div className=\"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600\">\n        Selecciona un aliado en el paso anterior.\n      </div>\n    )\n  }\n\n  const distanceKm = customerLocation\n    ? (calculateDistance(customerLocation.lat, customerLocation.lng, partner.lat, partner.lng) / 1000).toFixed(1)\n    : null\n\n  if (fulfillmentMode === \"pickup\") {\n    return (\n      <div className=\"rounded-2xl border border-slate-200 bg-slate-900/5 p-4\">\n        <div className=\"text-sm font-semibold text-slate-900\">{partner.name}</div>\n        <p className=\"text-xs text-slate-600\">{partner.address}</p>\n        <p className=\"text-[11px] uppercase tracking-wide text-slate-400\">{partner.cityState}</p>\n        {distanceKm && customerLocation && (\n          <p className=\"mt-2 text-xs text-slate-500\">Aproximadamente {distanceKm} km desde tu ubicación.</p>\n        )}\n      </div>\n    )\n  }\n\n  if (!deliveryInfo) {\n    return (\n      <div className=\"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600\">\n        Calcularemos el aliado más cercano una vez ingreses tu dirección completa.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-slate-900/5 p-4\">\n      <div className=\"text-sm font-semibold text-slate-900\">Aliado asignado: {partner.name}</div>\n      <p className=\"text-xs text-slate-600\">{partner.address}</p>\n      <p className=\"text-[11px] uppercase tracking-wide text-slate-400\">{partner.cityState}</p>\n      <div className=\"mt-3 flex flex-wrap items-center gap-3 text-xs text-slate-700\">\n        <span className=\"rounded-full bg-slate-900/5 px-2 py-1 font-semibold\">Estimado: {deliveryInfo.minutes} min</span>\n        <span className=\"rounded-full bg-slate-900/5 px-2 py-1 font-semibold\">Cobrado: {deliveryInfo.minutesCapped} min</span>\n        <span className=\"rounded-full bg-slate-900/5 px-2 py-1 font-semibold\">Cargo adicional: ${deliveryInfo.fee.toFixed(2)}</span>\n      </div>\n      <div className=\"mt-2 text-xs text-slate-500\">\n        Fuente: {deliveryInfo.source === \"ors\" ? \"Ruta ORS\" : \"Estimación\"}\n        </div>\n      {distanceKm && (\n        <div className=\"mt-4 text-xs text-slate-600\">Distancia aproximada: {distanceKm} km.</div>\n      )}\n      <div className=\"mt-4 rounded-xl border border-dashed border-slate-300 bg-white px-3 py-2 text-xs text-slate-600\">\n        El costo de envío se calcula a $0.50 por minuto (máximo 45 minutos), utilizando el aliado sugerido.\n      </div>\n    </div>\n  )\n}\n\nfunction InstructionsList({ method }: { method: (typeof PAYMENT_METHODS)[number] }) {\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-slate-900/5 p-4\">\n      <h4 className=\"text-sm font-semibold uppercase tracking-[0.2em] text-slate-500\">Instrucciones</h4>\n      <ul className=\"mt-3 space-y-1 text-sm text-slate-700\">\n        {method.merchantInfo.map((info) => (\n          <li key={info.label} className=\"flex items-center justify-between gap-4\">\n            <span className=\"text-slate-500\">{info.label}</span>\n            <span className=\"font-semibold text-slate-900\">{info.value}</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nfunction OrderSummary({\n  items,\n  baseTotal,\n  deliveryFee,\n  orderTotal,\n  deliveryInfo,\n}: {\n  items: { key: string; name: string; quantity: number; total: number }[]\n  baseTotal: number\n  deliveryFee: number\n  orderTotal: number\n  deliveryInfo: DeliveryInfo | null\n}) {\n  return (\n    <div className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm\">\n      <h2 className=\"text-lg font-semibold text-slate-900\">Resumen del pedido</h2>\n      <div className=\"mt-4 space-y-3 text-sm text-slate-700\">\n        {items.map((item) => (\n          <div key={item.key} className=\"flex items-center justify-between\">\n            <span>\n              {item.name} × {item.quantity}\n            </span>\n            <span>${item.total.toFixed(2)}</span>\n          </div>\n        ))}\n      </div>\n      <div className=\"mt-4 border-t border-slate-200 pt-4 text-sm text-slate-700\">\n        <div className=\"flex items-center justify-between\">\n          <span>Subtotal</span>\n          <span>${baseTotal.toFixed(2)}</span>\n        </div>\n        <div className=\"flex items-center justify-between text-slate-500\">\n          <span>Envío</span>\n          <span>{deliveryInfo ? `$${deliveryFee.toFixed(2)}` : \"$0.00\"}</span>\n        </div>\n        <div className=\"mt-3 flex items-center justify-between text-base font-semibold text-slate-900\">\n          <span>Total</span>\n          <span>${orderTotal.toFixed(2)}</span>\n        </div>\n      </div>\n      {deliveryInfo && (\n        <div className=\"mt-4 rounded-xl border border-slate-200 bg-slate-900/5 px-3 py-2 text-xs text-slate-600\">\n          Envío calculado {deliveryInfo.source === \"ors\" ? \"con ORS\" : \"con estimación\"}. Distancia aproximada: {deliveryInfo.distanceMeters ? `${(deliveryInfo.distanceMeters / 1000).toFixed(1)} km` : \"N/D\"}.\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction derivePickupOptions(address: string): PickupOption[] {\n  if (!address) return []\n  const normalized = address.toLowerCase()\n\n  const options: PickupOption[] = []\n  distributorLocations.forEach((location) => {\n    location.businesses.forEach((business) => {\n      const cityFragments = business.cityState.toLowerCase().split(/\\s|,/).filter(Boolean)\n      let score = 0\n      cityFragments.forEach((fragment) => {\n        if (fragment.length > 3 && normalized.includes(fragment)) {\n          score += 2\n        }\n      })\n      if (normalized.includes(business.name.toLowerCase())) {\n        score += 3\n      }\n      if (!score && normalized.includes(location.city.toLowerCase())) {\n        score += 1\n      }\n      options.push({\n        id: `${business.name}-${business.address}`,\n        name: business.name,\n        address: business.address,\n        cityState: business.cityState,\n        score,\n      })\n    })\n  })\n\n  const sorted = options.sort((a, b) => b.score - a.score)\n  return sorted.slice(0, 3).map((option, index) => ({ ...option, score: option.score + (3 - index) }))\n}\n\nfunction deriveDeliveryInfo(address: string, options: PickupOption[]): DeliveryInfo | null {\n  if (!address) return null\n  const candidates = options.length ? options : derivePickupOptions(address)\n  if (!candidates.length) return null\n  const best = candidates[0]\n  const minutesEstimated = Math.max(20, 30 - best.score * 2)\n  const minutesCapped = Math.min(minutesEstimated, 45)\n  console.log({ step: \"delivery-estimate\", selectedAlly: best.id, minutesEstimated, minutesCapped })\n  const fee = minutesCapped * 0.5\n  return {\n    partnerId: best.id,\n    partnerName: best.name,\n    partnerAddress: best.address,\n    partnerCityState: best.cityState,\n    minutes: minutesEstimated,\n    minutesCapped,\n    fee,\n    distanceMeters: null, // Placeholder, will be calculated by ORS\n    source: \"fallback\", // Placeholder, will be determined by ORS\n  }\n}\n\nfunction calculateDistance(lat1: number, lng1: number, lat2: number, lng2: number) {\n  const R = 6371e3\n  const toRad = (value: number) => (value * Math.PI) / 180\n  const φ1 = toRad(lat1)\n  const φ2 = toRad(lat2)\n  const Δφ = toRad(lat2 - lat1)\n  const Δλ = toRad(lng2 - lng1)\n\n  const a = Math.sin(Δφ / 2) ** 2 + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) ** 2\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n\n  return R * c\n}","export type PaymentCurrency = 'USD' | 'VES'\r\n\r\nexport type PaymentField = {\r\n  id: string\r\n  label: string\r\n  type: 'text' | 'email' | 'select'\r\n  placeholder?: string\r\n  required?: boolean\r\n  options?: { label: string; value: string }[]\r\n}\r\n\r\nexport type PaymentMethod = {\r\n  id: 'zelle' | 'pagomovil' | 'bank' | 'card' | 'paypal'\r\n  label: string\r\n  description?: string\r\n  currency: PaymentCurrency\r\n  merchantInfo: { label: string; value: string }[]\r\n  fields: PaymentField[]\r\n}\r\n\r\nexport const VENEZUELAN_BANK_OPTIONS: { label: string; value: string }[] = [\r\n  { label: 'Banco de Venezuela (0102)', value: '0102' },\r\n  { label: 'Banesco (0134)', value: '0134' },\r\n  { label: 'Mercantil (0105)', value: '0105' },\r\n  { label: 'Provincial (0108)', value: '0108' },\r\n  { label: 'BNC (0191)', value: '0191' },\r\n]\r\n\r\nconst MERCHANT = {\r\n  zelleName: 'INDUSTRIAS TERMOTRONIC',\r\n  zelleEmail: 'pagos@termotronic.com',\r\n  pmFullName: 'INDUSTRIAS TERMOTRONIC',\r\n  pmPhone: '0412-TERMOTRO',\r\n  pmNationalId: 'J-301781899',\r\n  pmBankName: 'Banesco',\r\n  pmBankCode: '0134',\r\n  bankFullName: 'INDUSTRIAS TERMOTRONIC',\r\n  bankNationalId: 'J-301781899',\r\n  bankName: 'Banesco',\r\n  bankAccountType: 'Cuenta Verde Efectivo US$',\r\n  bankAccountNumber: '01341740720021814454',\r\n}\r\n\r\nexport const PAYMENT_METHODS: PaymentMethod[] = [\r\n  {\r\n    id: 'paypal',\r\n    label: 'PayPal (USD)',\r\n    description: 'Pay using your PayPal account',\r\n    currency: 'USD',\r\n    merchantInfo: [\r\n      { label: 'PayPal Business', value: 'paypal@termotronic.com' },\r\n    ],\r\n    fields: [\r\n      { id: 'paypalEmail', label: 'Correo PayPal', type: 'email', required: true },\r\n      { id: 'paypalTxn', label: 'ID de transacción (opcional)', type: 'text', placeholder: 'p. ej. 9AB12345CD6789012' },\r\n    ],\r\n  },\r\n  {\r\n    id: 'card',\r\n    label: 'Credit/Debit Card',\r\n    description: 'Pay securely with your card',\r\n    currency: 'USD',\r\n    merchantInfo: [\r\n      { label: 'Proveedor', value: 'PayPal Checkout' },\r\n      { label: 'Tarjetas', value: 'Visa, Mastercard, American Express' },\r\n    ],\r\n    fields: [\r\n      { id: 'cardHolder', label: 'Nombre en la tarjeta', type: 'text', required: true },\r\n      { id: 'cardEmail', label: 'Correo del titular', type: 'email', required: true },\r\n    ],\r\n  },\r\n  {\r\n    id: 'zelle',\r\n    label: 'Zelle (USD)',\r\n    description: 'Transfer via Zelle in USD',\r\n    currency: 'USD',\r\n    merchantInfo: [\r\n      { label: 'Recipient name', value: MERCHANT.zelleName },\r\n      { label: 'Zelle email', value: MERCHANT.zelleEmail },\r\n    ],\r\n    fields: [\r\n      { id: 'senderName', label: 'Nombre del remitente', type: 'text', required: true },\r\n      { id: 'senderEmail', label: 'Correo del remitente', type: 'email', required: true },\r\n      { id: 'confirmation', label: 'Número de confirmación (opcional)', type: 'text', placeholder: 'p. ej. ABC123' },\r\n    ],\r\n  },\r\n  {\r\n    id: 'pagomovil',\r\n    label: 'Pago Móvil (VES)',\r\n    description: 'Pago móvil interbancario en bolívares',\r\n    currency: 'VES',\r\n    merchantInfo: [\r\n      { label: 'Banco', value: `${MERCHANT.pmBankName} (${MERCHANT.pmBankCode})` },\r\n      { label: 'Titular', value: MERCHANT.pmFullName },\r\n      { label: 'Teléfono', value: MERCHANT.pmPhone },\r\n      { label: 'Cédula/RIF', value: MERCHANT.pmNationalId },\r\n    ],\r\n    fields: [\r\n      { id: 'payerPhone', label: 'Tu teléfono (Pago Móvil)', type: 'text', required: true, placeholder: '04xx-xxxxxxx' },\r\n      { id: 'payerId', label: 'Tu cédula/RIF', type: 'text', required: true, placeholder: 'V-xxxxxxx' },\r\n      { id: 'payerBank', label: 'Tu banco', type: 'select', required: true, options: VENEZUELAN_BANK_OPTIONS },\r\n      { id: 'reference', label: 'Referencia de pago', type: 'text', required: true },\r\n    ],\r\n  },\r\n  {\r\n    id: 'bank',\r\n    label: 'Depósito Banesco Verde (USD)',\r\n    description: 'Depósito directo en cuenta Banesco Verde en dólares',\r\n    currency: 'USD',\r\n    merchantInfo: [\r\n      { label: 'Banco', value: MERCHANT.bankName },\r\n      { label: 'Tipo de cuenta', value: MERCHANT.bankAccountType },\r\n      { label: 'Nº de cuenta', value: MERCHANT.bankAccountNumber },\r\n      { label: 'Titular', value: MERCHANT.bankFullName },\r\n      { label: 'RIF', value: MERCHANT.bankNationalId },\r\n      { label: 'Instrucción', value: 'Deposita en taquilla y envía el comprobante a tienda@termotronic.com' },\r\n    ],\r\n    fields: [\r\n      { id: 'depositDate', label: 'Fecha del depósito', type: 'text', required: true, placeholder: 'DD/MM/AAAA' },\r\n      { id: 'reference', label: 'Número de comprobante', type: 'text', required: true },\r\n    ],\r\n  },\r\n]\r\n\r\n\r\n","\"use client\"\r\n\r\nimport { useEffect, useMemo, useState } from \"react\"\r\nimport dynamic from \"next/dynamic\"\r\nimport debounce from \"lodash.debounce\"\r\n\r\nimport type { PartnerLocation } from \"@/lib/partners\"\r\nimport { sortPartnersByDistance } from \"@/lib/maps\"\r\n\r\nconst Map = dynamic(() => import(\"./Map\"), { ssr: false })\r\n\r\nexport type LocationStepValues = {\r\n  name: string\r\n  email: string\r\n  phone: string\r\n  fulfillmentMode: \"pickup\" | \"delivery\"\r\n  customerLocation: {\r\n    lat: number\r\n    lng: number\r\n    label: string\r\n  } | null\r\n  selectedPartnerId: string | null\r\n}\r\n\r\nexport type LocationStepProps = {\r\n  partners: PartnerLocation[]\r\n  value: LocationStepValues\r\n  onChange: (value: LocationStepValues) => void\r\n  errors: Record<string, string>\r\n  onErrorsChange: (errors: Record<string, string>) => void\r\n  onComplete: () => void\r\n}\r\n\r\nexport default function LocationStep({ partners, value, onChange, errors, onErrorsChange, onComplete }: LocationStepProps) {\r\n  const [searchQuery, setSearchQuery] = useState(\"\")\r\n  const [searchResults, setSearchResults] = useState<\r\n    Array<{ id: string; label: string; name: string; locality: string; lat: number; lng: number }>\r\n  >([])\r\n  const [isSearching, setIsSearching] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setSearchQuery(value.customerLocation?.label ?? \"\")\r\n  }, [value.customerLocation])\r\n\r\n  const nearestPartners = useMemo(() => {\r\n    if (!value.customerLocation) return partners.slice(0, 5)\r\n    return sortPartnersByDistance(partners, value.customerLocation.lat, value.customerLocation.lng).slice(0, 5)\r\n  }, [partners, value.customerLocation])\r\n\r\n  const selectedPartner = useMemo(() => {\r\n    return partners.find((partner) => partner.id === value.selectedPartnerId) ?? null\r\n  }, [partners, value.selectedPartnerId])\r\n\r\n  const performSearch = useMemo(\r\n    () =>\r\n      debounce(async (query: string) => {\r\n        if (!query.trim()) {\r\n          setSearchResults([])\r\n          return\r\n        }\r\n        setIsSearching(true)\r\n        try {\r\n          const response = await fetch(\"/api/geocode\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ query })\r\n          })\r\n          if (!response.ok) {\r\n            console.error(\"Geocode failed\", await response.text())\r\n            return\r\n          }\r\n          const data = await response.json()\r\n          setSearchResults(data.results)\r\n        } catch (error) {\r\n          console.error(\"Geocode error\", error)\r\n        } finally {\r\n          setIsSearching(false)\r\n        }\r\n      }, 400),\r\n    []\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (searchQuery && searchQuery !== value.customerLocation?.label) {\r\n      performSearch(searchQuery)\r\n    } else {\r\n      setSearchResults([])\r\n    }\r\n  }, [searchQuery, value.customerLocation, performSearch])\r\n\r\n  const handleLocationChange = (location: { lat: number; lng: number; label: string }) => {\r\n    onChange({\r\n      ...value,\r\n      customerLocation: location,\r\n      selectedPartnerId:\r\n        sortPartnersByDistance(partners, location.lat, location.lng)[0]?.id ?? null,\r\n    })\r\n    onErrorsChange({ ...errors, customerLocation: \"\" })\r\n  }\r\n\r\n  const validateAndContinue = () => {\r\n    const newErrors: Record<string, string> = {}\r\n    if (!value.name.trim()) newErrors.name = \"Requerido\"\r\n    if (!value.email.trim()) newErrors.email = \"Requerido\"\r\n    if (!value.customerLocation) newErrors.customerLocation = \"Selecciona una ubicación\"\r\n    if (value.fulfillmentMode === \"pickup\" && !value.selectedPartnerId) {\r\n      newErrors.selectedPartnerId = \"Selecciona un aliado\"\r\n    }\r\n    onErrorsChange(newErrors)\r\n    if (Object.keys(newErrors).length === 0) {\r\n      onComplete()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid gap-4 md:grid-cols-2\">\r\n        <Field\r\n          label=\"Nombre completo\"\r\n          value={value.name}\r\n          onChange={(name) => onChange({ ...value, name })}\r\n          error={errors.name}\r\n          required\r\n        />\r\n        <Field\r\n          label=\"Correo electrónico\"\r\n          type=\"email\"\r\n          value={value.email}\r\n          onChange={(email) => onChange({ ...value, email })}\r\n          error={errors.email}\r\n          required\r\n        />\r\n        <Field\r\n          label=\"Teléfono (opcional)\"\r\n          value={value.phone}\r\n          onChange={(phone) => onChange({ ...value, phone })}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <label className=\"text-sm font-semibold uppercase tracking-[0.25em] text-slate-500\">Modalidad</label>\r\n        <div className=\"grid gap-3 md:grid-cols-2\">\r\n          <ToggleButton\r\n            label=\"Retiro en distribuidor\"\r\n            description=\"Elige el aliado más conveniente.\"\r\n            selected={value.fulfillmentMode === \"pickup\"}\r\n            onClick={() => onChange({ ...value, fulfillmentMode: \"pickup\" })}\r\n          />\r\n          <ToggleButton\r\n            label=\"Entrega a domicilio\"\r\n            description=\"Coordinamos la entrega con el aliado más cercano.\"\r\n            selected={value.fulfillmentMode === \"delivery\"}\r\n            onClick={() => onChange({ ...value, fulfillmentMode: \"delivery\" })}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <label className=\"text-sm font-semibold uppercase tracking-[0.25em] text-slate-500\">\r\n          {value.fulfillmentMode === \"pickup\" ? \"Selecciona tu punto aliado\" : \"Dirección de entrega\"}\r\n        </label>\r\n        <div className=\"space-y-2\">\r\n          <input\r\n            value={searchQuery}\r\n            onChange={(event) => setSearchQuery(event.target.value)}\r\n            placeholder={\r\n              value.fulfillmentMode === \"pickup\"\r\n                ? \"Busca tu dirección o tu aliado\"\r\n                : \"Escribe tu dirección\"\r\n            }\r\n            className=\"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200\"\r\n          />\r\n          {isSearching && <p className=\"text-xs text-slate-500\">Buscando…</p>}\r\n          {searchResults.length > 0 && (\r\n            <div className=\"max-h-48 overflow-y-auto rounded-xl border border-slate-200 bg-white shadow-sm\">\r\n              {searchResults.map((result) => (\r\n                <button\r\n                  key={result.id}\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    handleLocationChange({\r\n                      lat: result.lat,\r\n                      lng: result.lng,\r\n                      label: result.label,\r\n                    })\r\n                    setSearchResults([])\r\n                    setSearchQuery(result.label)\r\n                  }}\r\n                  className=\"flex w-full flex-col items-start px-3 py-2 text-left text-sm hover:bg-slate-100\"\r\n                >\r\n                  <span className=\"font-medium text-slate-900\">{result.name}</span>\r\n                  <span className=\"text-xs text-slate-600\">\r\n                    {result.locality ? `${result.locality} • ${result.label}` : result.label}\r\n                  </span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n          {errors.customerLocation && <p className=\"text-xs text-red-600\">{errors.customerLocation}</p>}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"h-80 overflow-hidden rounded-2xl border border-slate-200\">\r\n        <Map\r\n          customerLocation={value.customerLocation}\r\n          partners={partners}\r\n          fulfillmentMode={value.fulfillmentMode}\r\n          selectedPartnerId={value.selectedPartnerId}\r\n          onCustomerLocationChange={handleLocationChange}\r\n          onSelectPartner={(partnerId) => onChange({ ...value, selectedPartnerId: partnerId })}\r\n        />\r\n      </div>\r\n\r\n      {value.fulfillmentMode === \"pickup\" && (\r\n        <div className=\"space-y-3\">\r\n          <h3 className=\"text-sm font-semibold text-slate-700\">Aliados sugeridos</h3>\r\n          <PickupList\r\n            options={nearestPartners}\r\n            selectedId={value.selectedPartnerId}\r\n            onSelect={(id) => onChange({ ...value, selectedPartnerId: id })}\r\n          />\r\n          {errors.selectedPartnerId && <p className=\"text-xs text-red-600\">{errors.selectedPartnerId}</p>}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-end\">\r\n        <button type=\"button\" className=\"btn btn-primary\" onClick={validateAndContinue}>\r\n          Continuar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Field({\r\n  label,\r\n  value,\r\n  onChange,\r\n  error,\r\n  required,\r\n  type = \"text\",\r\n}: {\r\n  label: string\r\n  value: string\r\n  onChange: (value: string) => void\r\n  error?: string\r\n  required?: boolean\r\n  type?: string\r\n}) {\r\n  return (\r\n    <label className=\"block text-sm font-medium text-slate-700\">\r\n      {label}\r\n      <input\r\n        type={type}\r\n        value={value}\r\n        required={required}\r\n        onChange={(event) => onChange(event.target.value)}\r\n        className=\"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200\"\r\n      />\r\n      {error && <span className=\"mt-1 block text-xs text-red-600\">{error}</span>}\r\n    </label>\r\n  )\r\n}\r\n\r\nfunction ToggleButton({\r\n  label,\r\n  description,\r\n  selected,\r\n  onClick,\r\n}: {\r\n  label: string\r\n  description: string\r\n  selected: boolean\r\n  onClick: () => void\r\n}) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className={`rounded-2xl border px-4 py-3 text-left transition ${\r\n        selected ? \"border-slate-900 bg-slate-900/5\" : \"border-slate-200 hover:border-slate-300\"\r\n      }`}\r\n    >\r\n      <div className=\"font-semibold text-slate-900\">{label}</div>\r\n      <p className=\"mt-1 text-xs text-slate-600\">{description}</p>\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction PickupList({\r\n  options,\r\n  selectedId,\r\n  onSelect,\r\n}: {\r\n  options: PartnerLocation[]\r\n  selectedId: string | null\r\n  onSelect: (id: string) => void\r\n}) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {options.map((option) => (\r\n        <button\r\n          key={option.id}\r\n          type=\"button\"\r\n          onClick={() => onSelect(option.id)}\r\n          className={`flex w-full items-start justify-between rounded-xl border px-3 py-2 text-left text-sm transition ${\r\n            selectedId === option.id\r\n              ? \"border-slate-900 bg-slate-900/5\"\r\n              : \"border-slate-200 hover:border-slate-300\"\r\n          }`}\r\n        >\r\n          <div>\r\n            <div className=\"font-semibold text-slate-900\">{option.name}</div>\r\n            <div className=\"text-xs text-slate-600\">{option.address}</div>\r\n            <div className=\"text-[11px] uppercase tracking-wide text-slate-400\">{option.cityState}</div>\r\n          </div>\r\n          <div className=\"text-xs text-slate-500\">\r\n            {selectedId === option.id ? \"Seleccionado\" : \"Elegir\"}\r\n          </div>\r\n        </button>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import type { PartnerLocation } from \"./partners\"\r\n\r\nexport function calculateHaversineDistance(lat1: number, lng1: number, lat2: number, lng2: number): number {\r\n  const R = 6371e3\r\n  const toRad = (value: number) => (value * Math.PI) / 180\r\n  const φ1 = toRad(lat1)\r\n  const φ2 = toRad(lat2)\r\n  const Δφ = toRad(lat2 - lat1)\r\n  const Δλ = toRad(lng2 - lng1)\r\n\r\n  const a = Math.sin(Δφ / 2) ** 2 + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) ** 2\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\r\n\r\n  return R * c\r\n}\r\n\r\nexport function sortPartnersByDistance(\r\n  partners: PartnerLocation[],\r\n  userLat: number,\r\n  userLng: number\r\n): PartnerLocation[] {\r\n  return [...partners].sort((a, b) => {\r\n    const distA = calculateHaversineDistance(userLat, userLng, a.lat, a.lng)\r\n    const distB = calculateHaversineDistance(userLat, userLng, b.lat, b.lng)\r\n    return distA - distB\r\n  })\r\n}\r\n","import rawData from \"@/data/partner-coordinates.json\"\r\n\r\nexport type PartnerLocation = {\r\n  id: string\r\n  type: \"distributor\" | \"service\"\r\n  name: string\r\n  address: string\r\n  cityState: string\r\n  lat: number\r\n  lng: number\r\n  source?: string\r\n}\r\n\r\nconst partners: PartnerLocation[] = Object.entries(rawData).map(([key, value]) => ({\r\n  id: key,\r\n  type: value.type as PartnerLocation[\"type\"],\r\n  name: value.name,\r\n  address: value.address,\r\n  cityState: value.cityState,\r\n  lat: value.lat,\r\n  lng: value.lng,\r\n  source: value.source,\r\n}))\r\n\r\nexport function getAllPartners(): PartnerLocation[] {\r\n  return partners\r\n}\r\n\r\nexport function getPartnersByType(type: PartnerLocation[\"type\"]): PartnerLocation[] {\r\n  return partners.filter((partner) => partner.type === type)\r\n}\r\n\r\nexport function getPartnerById(id: string | null | undefined): PartnerLocation | null {\r\n  if (!id) return null\r\n  return partners.find((partner) => partner.id === id) ?? null\r\n}\r\n"],"names":["BailoutToCSR","reason","children","window","BailoutToCSRError","encodeURIPath","file","split","map","p","encodeURIComponent","join","PreloadChunks","moduleIds","workStore","workAsyncStorage","getStore","undefined","allFiles","reactLoadableManifest","manifest","key","chunks","files","push","length","dplId","process","env","NEXT_DEPLOYMENT_ID","chunk","href","assetPrefix","isCss","endsWith","link","precedence","rel","as","preload","fetchPriority","convertModule","mod","hasDefault","default","defaultOptions","loader","Promise","resolve","loading","ssr","Loadable","options","opts","Lazy","lazy","then","Loading","LoadableComponent","props","fallbackElement","isLoading","pastDelay","error","hasSuspenseBoundary","Wrap","Suspense","Fragment","wrapProps","fallback","modules","displayName","dynamic","dynamicOptions","mergedOptions","loadableOptions","loadableGenerated"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}